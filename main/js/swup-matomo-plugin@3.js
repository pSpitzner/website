!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t||self).SwupMatomoPlugin=e()}(this,function(){function t(){return t=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},t.apply(this,arguments)}const e=t=>String(t).split(".").map(t=>String(parseInt(t||"0",10))).concat(["0","0"]).slice(0,3).join(".");class n{constructor(){this.isSwupPlugin=!0,this.swup=void 0,this.version=void 0,this.requires={},this.handlersToUnregister=[]}mount(){}unmount(){this.handlersToUnregister.forEach(t=>t()),this.handlersToUnregister=[]}_beforeMount(){if(!this.name)throw new Error("You must define a name of plugin when creating a class.")}_afterUnmount(){}_checkRequirements(){return"object"!=typeof this.requires||Object.entries(this.requires).forEach(([t,n])=>{if(!function(t,n,o){const r=function(t,e){var n;if("swup"===t)return null!=(n=e.version)?n:"";{var o;const n=e.findPlugin(t);return null!=(o=null==n?void 0:n.version)?o:""}}(t,o);return!!r&&((t,n)=>n.every(n=>{const[,o,r]=n.match(/^([\D]+)?(.*)$/)||[];var i,s;return((t,e)=>{const n={"":t=>0===t,">":t=>t>0,">=":t=>t>=0,"<":t=>t<0,"<=":t=>t<=0};return(n[e]||n[""])(t)})((s=r,i=e(i=t),s=e(s),i.localeCompare(s,void 0,{numeric:!0})),o||">=")}))(r,n)}(t,n=Array.isArray(n)?n:[n],this.swup)){const e=`${t} ${n.join(", ")}`;throw new Error(`Plugin version mismatch: ${this.name} requires ${e}`)}}),!0}on(t,e,n={}){var o;e=!(o=e).name.startsWith("bound ")||o.hasOwnProperty("prototype")?e.bind(this):e;const r=this.swup.hooks.on(t,e,n);return this.handlersToUnregister.push(r),r}once(e,n,o={}){return this.on(e,n,t({},o,{once:!0}))}before(e,n,o={}){return this.on(e,n,t({},o,{before:!0}))}replace(e,n,o={}){return this.on(e,n,t({},o,{replace:!0}))}off(t,e){return this.swup.hooks.off(t,e)}}return class extends n{constructor(){super(...arguments),this.name="SwupMatomoPlugin",this.requires={swup:">=4"}}mount(){this.on("page:view",this.trackPageView)}trackPageView(){if("function"!=typeof window._paq?.push)return void this.swup.log("[@swup/matomo-plugin] ðŸš¨ Matomo is not loaded");const t=document.title,e=window.location.pathname+window.location.search;window._paq.push(["setDocumentTitle",t]),window._paq.push(["setCustomUrl",e]),window._paq.push(["trackPageView"]),this.swup.log(`[@swup/matomo-plugin] âœ… Visit tracked for '${e}'`)}}});
//# sourceMappingURL=index.umd.js.map
